<!DOCTYPE html>
<html>
<head>
    <title>RESERVE PLOT</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { background:#fff; font-family:sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
        .box { background:#fff; padding:30px; border-radius:15px; width:320px; text-align:center; border:2px solid #000; }
        input { width:90%; padding:12px; margin:10px 0; border:1px solid #ddd; border-radius:8px; }
        .sub-btn { width:100%; padding:15px; background:#ef4444; color:#fff; border:none; border-radius:8px; font-weight:bold; cursor:pointer; }
    </style>
</head>
<body>
    <div class="box">
        <h2>RESERVE PLOT</h2>
        <input type="text" id="bn" placeholder="Brand Name">
        <input type="number" id="pid" placeholder="Plot ID (1-10000)">
        <button onclick="submitOrder()" class="sub-btn">SUBMIT REQUEST</button>
        <p id="order-id-display" style="font-weight:bold; color:blue; margin-top:15px;"></p>
        <a href="index.html" style="text-decoration:none; color:#666; font-size:12px;">‚Üê Back to Map</a>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script>
        firebase.initializeApp({databaseURL: "https://m-legacy-5cf2b-default-rtdb.firebaseio.com/"});
        function submitOrder() {
            const n = document.getElementById('bn').value, p = document.getElementById('pid').value;
            const orderID = "ORD" + Math.floor(Math.random() * 999999);
            if(!n || !p) return alert("Fill all!");
            
            firebase.database().ref('orders/' + orderID).set({ name: n, plotID: p, orderID: orderID })
            .then(() => {
                confetti();
                document.getElementById('order-id-display').innerText = "YOUR ORDER ID: " + orderID + " (Save this!)";
                alert("Order Placed! Please save your Order ID: " + orderID);
            });
        }
    </script>
</body>
</html>
